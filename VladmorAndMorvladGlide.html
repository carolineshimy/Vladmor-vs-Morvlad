<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vladmor and Morvlad Glide</title>

    <style>
        body
        {
            text-align: center;
            background-color: #327845;
        }
        canvas
        {
            background:url("Background.png") no-repeat;
            background-size: cover;
            border: 2px solid black;
        }
        .flip
        {
            transform: scaleX(-1);
        }
        
    </style>

</head>
<body>
  
    <h1>Vladmor and Morvlad Glide</h1>
    <canvas width="550" height="400"></canvas>


    <script>

        var canvas = document.querySelector("canvas");
        var drawingSurface = canvas.getContext("2d");

        var spriteObject = 
        {
            // this is a javascript object variable
            x : 0,
            y : 0,
            width: 64,
            height : 64
        };
 
        const speed = 2
        const speed2 = 4

        //vladmor
        var bird = Object.create(spriteObject);
        bird.x = 100;
        bird.y = 100;
        var Xspeed = speed;
        var Yspeed = speed;
        var image = new Image();

        //morvlad
        var morvlad = Object.create(spriteObject);
        morvlad.x = 300
        morvlad.y = 200
        var Xspeed2 = -speed2;
        var Yspeed2 = speed2;
        var image2 = new Image();


        var text = "Hello Vladmor";
        var imagesLoaded = 0;
        var animationStarted = false;

        image.addEventListener("load", imageLoadHandler, false);
        image2.addEventListener("load", imageLoadHandler, false);

        image.src = "bird.png";
        image2.src = "morvlad.png";

    
        





        function imageLoadHandler()
        {
            imagesLoaded++;
            console.log("Images loaded: " + imagesLoaded);
            if (imagesLoaded === 2 && !animationStarted){
                animationStarted = true;
                update();
            }
           
        }

        
        function checkCollision(bird, morvlad)
        {
         return bird.x < morvlad.x + morvlad.width &&        //vladmor's left edge is to the left of morvlad's right edge
                bird.x + bird.width > morvlad.x &&           //vladmor's right edge is to the right of morvlads left edge
                bird.y < morvlad.y + morvlad.height &&       //vladmor's top edge is above morvlad's bottom edge
                bird.y + bird.height > morvlad.y;            //vladmor's bottom edge is below morvlad's top edge
        }





        function update()
        {
            window.requestAnimationFrame(update, canvas);

            //vladmor
            bird.x += Xspeed;
            bird.y += Yspeed;

            if(bird.width + bird.x > 550)
        {
            Xspeed = -speed;
            text = "Going Left";
        }
            else if(bird.x < 1)
        {
            Xspeed = speed;
            text = "Going Right";
        }
        if(bird.height + bird.y > 400)
        {
            Yspeed = -speed;
            text = "Going Up";
        }
        else if(bird.y < 1)
        {
            Yspeed = speed;
            text = "Going Down";
        }

        //morvlad
            morvlad.x += Xspeed2;
            morvlad.y += Yspeed2;

            if(morvlad.width + morvlad.x > 550)
        {
            Xspeed2 = -speed2;
        }
            else if(morvlad.x < 1)
        {
            Xspeed2 = speed2;
        }
        if(morvlad.height + morvlad.y > 400)
        {
            Yspeed2 = -speed2;
        }
        else if(morvlad.y < 1)
        {
            Yspeed2 = speed2;
        }

        //hitting each other
      
        if (checkCollision(bird, morvlad))
        {
         Xspeed = -Xspeed;
         Yspeed = -Yspeed;
         Xspeed2 = -Xspeed2;
         Yspeed2 = -Yspeed2;
        }





        render();

        }







        function render()
        {
            drawingSurface.clearRect(0,0, canvas.width, canvas.height);
           
    //vladmor
            drawingSurface.save();
            if (Xspeed > 0) {
                //flipped when going right
                drawingSurface.translate(bird.x + bird.width, bird.y);
                drawingSurface.scale(-1,1);
                drawingSurface.drawImage(image, 0, 0, bird.width, bird.height);
            } else {
                //normal when going left
                drawingSurface.drawImage(image, Math.floor(bird.x), Math.floor(bird.y), bird.width, bird.height);
            }
            
            drawingSurface.restore();


    //morvlad
            drawingSurface.save();
            if (Xspeed2 > 0) {
                //flipped when going right
                drawingSurface.translate(morvlad.x + morvlad.width, morvlad.y);
                drawingSurface.scale(-1,1);
                drawingSurface.drawImage(image2, 0, 0, morvlad.width, morvlad.height);
            } else {
                //normal when going left
                drawingSurface.drawImage(image2, Math.floor(morvlad.x), Math.floor(morvlad.y), morvlad.width, morvlad.height);
            }

            drawingSurface.restore();

            drawingSurface.font = "bold 20px Arial"
            drawingSurface.fillText(text, 10, 30, 200); 

        }

    </script>


</body>
</html>